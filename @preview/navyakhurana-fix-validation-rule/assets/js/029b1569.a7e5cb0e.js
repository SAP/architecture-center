"use strict";(globalThis.webpackChunksap_architecture_center=globalThis.webpackChunksap_architecture_center||[]).push([[8885],{22084:(e,r,a)=>{a.r(r),a.d(r,{default:()=>w});var i=a(96540),s=a(16790),n=a(94335);const t={headerBar:"headerBar_tRVz",mainContainer:"mainContainer_KL74",fioriUploader:"fioriUploader_aL2w",uploadIcon:"uploadIcon_ai0q",uploaderTitle:"uploaderTitle_pGvO",uploaderSubtitle:"uploaderSubtitle_NZdQ",dragOver:"dragOver_b33j",contentArea:"contentArea_odbF",actionsHeader:"actionsHeader_y_dJ",progressBarContainer:"progressBarContainer_BS3Z",progressBar:"progressBar_AnP1",fileListContainer:"fileListContainer_RnGJ",fileCard:"fileCard_I7FE",validating:"validating_g827",success:"success_jkl6",warning:"warning_hHfM",error:"error_SWtv",fileCardHeader:"fileCardHeader_xywE",fileInfo:"fileInfo_q_hM",statusName:"statusName_P3QM",fileName:"fileName_uz_J",cardActions:"cardActions_dIvw",previewAndResults:"previewAndResults_PE2z",previewWrapper:"previewWrapper_QdOh",diagramViewer:"diagramViewer_oT78",resultsContainer:"resultsContainer_T94a",resultsPlaceholder:"resultsPlaceholder_DU_4",validatingContainer:"validatingContainer_VTQy",loadingSpinner:"loadingSpinner_wnCv",spin:"spin_TXs4",validatingText:"validatingText_exVz",violationCard:"violationCard__xrq",errorCard:"errorCard_RLrD",warningCard:"warningCard_uPgp",successCard:"successCard_skyk",infoCard:"infoCard_TyLh",violationHeader:"violationHeader_gjYO",severityBadge:"severityBadge_y2v3",violationRule:"violationRule_wvlt",violationDetails:"violationDetails_rRkT",centeredCardHeader:"centeredCardHeader_US2A",authCard:"authCard_cFEM",authCardContent:"authCardContent_MrAI",uploadLimitDialog:"uploadLimitDialog_nSj_",uploadLimitDialogContent:"uploadLimitDialogContent_e3JM",uploadLimitDialogIcon:"uploadLimitDialogIcon_Zo1P",warningDialogContent:"warningDialogContent_DYz3",warningIcon:"warningIcon_oMk0",authRequired:"authRequired_lZ2R"};var l=a(44586),o=a(96392),d=a(79552),c=a(68043),u=a(41238),h=a(35476),m=a(74983),g=a(64060),p=a(94617),v=a(59359),x=a(74395),C=(a(19950),a(66234)),j=a(45735),f=a(56347),_=a(74848);function b(){const e=(0,f.W6)(),{siteConfig:r}=(0,l.A)(),a=r.baseUrl;return(0,_.jsx)(c.l,{open:!0,children:(0,_.jsxs)("div",{className:t.warningDialogContent,children:[(0,_.jsx)(u.I,{name:"alert",className:t.warningIcon}),(0,_.jsx)(h.E,{children:"The Architecture Validator is not available for mobiles and tablets."}),(0,_.jsx)(m.$,{design:"Emphasized",onClick:()=>{e.push(a)},children:"Return to Home"})]})})}function w(){const{siteConfig:e}=(0,l.A)(),{users:r,loading:a}=(0,d.A)(),[f,w]=(0,i.useState)([]),[N,A]=(0,i.useState)(!1),[y,k]=(0,i.useState)(0),[T,L]=(0,i.useState)(!1),R=(0,i.useRef)(null),D=(0,j.A)(),I=null!==r.btp,E=e.baseUrl,$=()=>{const e=`${E}community/validation-rules`;window.open(e,"_blank","noopener,noreferrer")};if(D)return(0,_.jsx)(s.A,{children:(0,_.jsx)(b,{})});if(a)return(0,_.jsxs)(s.A,{children:[(0,_.jsxs)("div",{className:t.headerBar,children:[(0,_.jsx)("h1",{children:"Architecture Validator"}),(0,_.jsx)("p",{children:"Loading..."})]}),(0,_.jsx)("main",{className:t.mainContainer,children:(0,_.jsx)(g.p,{alignItems:"Center",justifyContent:"Center",style:{padding:"2rem"},children:(0,_.jsx)(h.E,{children:"Checking authentication..."})})})]});if(!I)return(0,_.jsxs)(s.A,{children:[(0,_.jsx)(C.A,{title:"Architecture Validator",subtitle:(0,_.jsxs)(_.Fragment,{children:["BTP authentication required to access this feature.",(0,_.jsx)("br",{}),"Learn More:"," ",(0,_.jsx)("a",{href:"#",onClick:$,style:{color:"#0073e6",textDecoration:"underline",cursor:"pointer"},children:"Validation Rules"})]}),breadcrumbCurrent:"Architecture Validator"}),(0,_.jsx)("main",{className:t.mainContainer,children:(0,_.jsx)(p.Z,{header:(0,_.jsxs)(g.p,{className:t.centeredCardHeader,children:[(0,_.jsx)(u.I,{name:"locked"}),(0,_.jsx)(v.h,{level:"H5",wrappingType:"None",children:"BTP Authentication Required"})]}),className:t.authCard,children:(0,_.jsxs)("div",{className:t.authCardContent,children:[(0,_.jsx)(h.E,{children:"The Architecture Validator requires BTP authentication to ensure secure access to validation services."}),(0,_.jsx)(h.E,{children:"Please log in with your BTP account to continue."}),(0,_.jsx)(m.$,{design:"Emphasized",onClick:()=>{const r=e.customFields.backendUrl;window.location.href=`${r}/user/login?origin_uri=${encodeURIComponent(window.location.href)}&provider=btp`},children:"Login with BTP to Continue"}),(0,_.jsx)(h.E,{children:"After logging in with BTP, you'll be redirected back to this page."})]})})})]});const P=(e,r)=>{w(a=>a.map(a=>a.id===e?{...a,...r}:a))},B=e=>{const r=Array.from(e).filter(e=>e.name.toLowerCase().endsWith(".drawio")),a=f.length,i=r.length;if(a>=5)return void L(!0);if(a+i>5)return void L(!0);if(i>5)return void L(!0);const s=r.map(e=>new Promise(r=>{const a=new FileReader;a.onload=a=>{r({id:`${e.name}-${e.lastModified}-${Math.random()}`,file:e,content:a.target?.result,status:"batched",results:null,error:null})},a.readAsText(e)}));Promise.all(s).then(e=>{w(r=>[...r,...e])})},S=e=>{e.target.files&&B(e.target.files),e.target.value=""},V=async r=>{P(r.id,{status:"validating"});try{const a=new FormData;a.append("file",r.file);const i=e.customFields.validatorApiUrl,s=o.q.load(),t=s?.token;if(!t)throw new Error("Authentication token not found. Please log in.");const l=await n.A.post(i,a,{headers:{Authorization:`Bearer ${t}`}}),d=l.data.validationReport.filter(e=>"INFO"!==e.severity);let c="success";d.some(e=>"ERROR"===e.severity)?c="error":d.some(e=>"WARNING"===e.severity)&&(c="warning"),P(r.id,{status:c,results:d})}catch(a){const e=a instanceof Error?a.message:"An unexpected error occurred.";P(r.id,{status:"error",error:e})}};return(0,_.jsxs)(s.A,{children:[(0,_.jsx)(C.A,{title:"Architecture Validator",subtitle:(0,_.jsxs)(_.Fragment,{children:["Upload, preview, and validate your .drawio architecture diagrams based on SAP best-practice guidelines.",(0,_.jsx)("br",{}),(0,_.jsx)("br",{}),(0,_.jsxs)("b",{children:["Learn More:"," ",(0,_.jsx)("a",{href:"#",onClick:$,style:{color:"#ffffff",textDecoration:"underline",cursor:"pointer"},children:"Validation Rules"})]})]}),breadcrumbCurrent:"Architecture Validator"}),(0,_.jsx)("main",{className:t.mainContainer,children:0===f.length?(0,_.jsxs)("div",{className:t.fioriUploader,onDragOver:e=>{e.preventDefault(),e.currentTarget.classList.add(t.dragOver)},onDragLeave:e=>e.currentTarget.classList.remove(t.dragOver),onDrop:e=>{e.preventDefault(),e.currentTarget.classList.remove(t.dragOver),e.dataTransfer.files&&B(e.dataTransfer.files)},onClick:()=>R.current?.click(),children:[(0,_.jsx)("input",{ref:R,type:"file",accept:".drawio",onChange:S,style:{display:"none"},multiple:!0}),(0,_.jsxs)(g.p,{direction:"Column",alignItems:"Center",justifyContent:"Center",style:{gap:"0.5rem"},children:[(0,_.jsx)(u.I,{name:"upload-to-cloud",className:t.uploadIcon}),(0,_.jsx)(v.h,{className:t.uploaderTitle,children:"Upload .drawio files"}),(0,_.jsx)(h.E,{className:t.uploaderSubtitle,children:"Drag and drop here or click to browse"})]})]}):(0,_.jsxs)("div",{className:t.contentArea,children:[(0,_.jsxs)("div",{className:t.actionsHeader,children:[(0,_.jsx)(m.$,{design:"Emphasized",onClick:async()=>{A(!0),k(0);const e=f.filter(e=>"batched"===e.status);let r=0;const a=e.length,i=e.map(async e=>{try{await V(e)}finally{r++,k(r/a*100)}});await Promise.all(i),A(!1)},disabled:N||!f.some(e=>"batched"===e.status),children:N?"Validating...":`Validate All (${f.filter(e=>"batched"===e.status).length})`}),(0,_.jsx)(m.$,{design:"Default",onClick:()=>R.current?.click(),disabled:f.length>=5,children:"Add More Files"}),(0,_.jsx)("input",{ref:R,type:"file",accept:".drawio",onChange:S,style:{display:"none"},multiple:!0}),(0,_.jsx)(m.$,{design:"Transparent",onClick:()=>{w([]),k(0),A(!1)},children:"Remove All"})]}),N&&(0,_.jsx)("div",{className:t.progressBarContainer,children:(0,_.jsx)("div",{className:t.progressBar,style:{width:`${y}%`}})}),(0,_.jsx)("div",{className:t.fileListContainer,children:f.map(e=>(0,_.jsxs)("div",{className:`${t.fileCard} ${t[e.status]}`,children:[(0,_.jsxs)("div",{className:t.fileCardHeader,children:[(0,_.jsxs)("div",{className:t.fileInfo,children:[(0,_.jsx)("span",{className:t.statusName,children:"batched"===e.status?"Pending":e.status.charAt(0).toUpperCase()+e.status.slice(1)}),(0,_.jsx)("h3",{className:t.fileName,children:e.file.name})]}),(0,_.jsxs)("div",{className:t.cardActions,children:["batched"===e.status&&(0,_.jsx)(m.$,{design:"Positive",onClick:()=>V(e),children:"Validate"}),(0,_.jsx)(m.$,{design:"Transparent",icon:"delete",tooltip:"Remove File",onClick:()=>{return r=e.id,void w(e=>e.filter(e=>e.id!==r));var r}})]})]}),(0,_.jsxs)("div",{className:t.previewAndResults,children:[(0,_.jsx)("div",{className:t.previewWrapper,children:(0,_.jsx)("iframe",{src:`https://viewer.diagrams.net/?lightbox=1&edit=_blank&layers=1&nav=1#R${encodeURIComponent(e.content)}`,className:t.diagramViewer,title:e.file.name})}),(0,_.jsxs)("div",{className:t.resultsContainer,children:["validating"===e.status?(0,_.jsxs)("div",{className:t.validatingContainer,children:[(0,_.jsx)("div",{className:t.loadingSpinner}),(0,_.jsx)("div",{className:t.validatingText,children:"Validating..."})]}):e.results||e.error?null:(0,_.jsx)("div",{className:t.resultsPlaceholder,children:"Validation results will appear here."}),e.error&&(0,_.jsxs)("div",{className:`${t.violationCard} ${t.errorCard}`,children:[(0,_.jsx)("strong",{children:"API Error:"})," ",e.error]}),0===e.results?.length&&(0,_.jsxs)("div",{className:`${t.violationCard} ${t.successCard}`,children:[(0,_.jsx)("strong",{children:"Validation Passed:"})," No issues found."]}),e.results?.map((e,r)=>(0,_.jsxs)("div",{className:`${t.violationCard} ${t[e.severity.toLowerCase()+"Card"]}`,children:[(0,_.jsx)("div",{className:t.violationHeader,children:(0,_.jsx)("span",{className:t.severityBadge,children:e.severity})}),(0,_.jsxs)("div",{className:t.violationRule,children:[(0,_.jsx)("strong",{children:"Rule:"})," ",e.rule]}),(0,_.jsxs)("div",{className:t.violationDetails,children:[(0,_.jsx)("strong",{children:"Details:"})," ",e.details]})]},r))]})]})]},e.id))})]})}),(0,_.jsxs)(c.l,{open:T,onClose:()=>L(!1),headerText:"Upload Limit Reached",children:[(0,_.jsx)("div",{className:t.uploadLimitDialog,children:(0,_.jsxs)(g.p,{direction:"Column",alignItems:"Start",className:t.uploadLimitDialogContent,children:[(0,_.jsx)(u.I,{name:"alert",className:t.uploadLimitDialogIcon}),(0,_.jsx)(h.E,{children:"You can upload a maximum of 5 diagrams at once."}),(0,_.jsx)(h.E,{children:"Please remove some files or try again with fewer diagrams."})]})}),(0,_.jsx)(x.y,{design:"Footer",endContent:(0,_.jsx)(m.$,{design:"Emphasized",onClick:()=>L(!1),children:"OK"})})]})]})}},45735:(e,r,a)=>{a.d(r,{A:()=>s});var i=a(96540);const s=(e=996)=>{const[r,a]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{const r=()=>{a(window.innerWidth<e)};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[e]),r}},66234:(e,r,a)=>{a.d(r,{A:()=>d});a(96540);var i=a(41238),s=a(35476),n=a(64060),t=a(59359);const l={heroBanner:"heroBanner_wA0H",heroContent:"heroContent_BGb3",breadCrumbs:"breadCrumbs_rAmo",homeLink:"homeLink_V6XO",breadcrumbSeparator:"breadcrumbSeparator_ZlLI",breadcrumbCurrent:"breadcrumbCurrent_fWkQ",heroTitle:"heroTitle_aezW",heroSubtitle:"heroSubtitle_ldDM"};var o=a(74848);function d({title:e,subtitle:r,breadcrumbCurrent:a}){return(0,o.jsx)("div",{className:l.heroBanner,children:(0,o.jsxs)("div",{className:l.heroContent,children:[(0,o.jsxs)("div",{className:l.breadCrumbs,children:[(0,o.jsx)("a",{href:"/",className:l.homeLink,children:(0,o.jsx)(i.I,{name:"home"})}),(0,o.jsx)(s.E,{className:l.breadcrumbSeparator,children:">"}),(0,o.jsx)(s.E,{className:l.breadcrumbCurrent,children:a})]}),(0,o.jsxs)(n.p,{direction:"Column",alignItems:"Start",justifyContent:"Center",children:[(0,o.jsx)(t.h,{className:l.heroTitle,children:e}),(0,o.jsx)(s.E,{className:l.heroSubtitle,children:r})]})]})})}}}]);