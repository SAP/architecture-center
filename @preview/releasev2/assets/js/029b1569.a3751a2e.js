"use strict";(globalThis.webpackChunksap_architecture_center=globalThis.webpackChunksap_architecture_center||[]).push([[8885],{22084:(e,a,r)=>{r.r(a),r.d(a,{default:()=>C});var i=r(96540),s=r(44263),t=r(94335);const n={headerBar:"headerBar_tRVz",mainContainer:"mainContainer_KL74",fioriUploader:"fioriUploader_aL2w",uploadIcon:"uploadIcon_ai0q",uploaderTitle:"uploaderTitle_pGvO",uploaderSubtitle:"uploaderSubtitle_NZdQ",dragOver:"dragOver_b33j",contentArea:"contentArea_odbF",actionsHeader:"actionsHeader_y_dJ",progressBarContainer:"progressBarContainer_BS3Z",progressBar:"progressBar_AnP1",fileListContainer:"fileListContainer_RnGJ",fileCard:"fileCard_I7FE",validating:"validating_g827",success:"success_jkl6",warning:"warning_hHfM",error:"error_SWtv",fileCardHeader:"fileCardHeader_xywE",fileInfo:"fileInfo_q_hM",statusName:"statusName_P3QM",fileName:"fileName_uz_J",cardActions:"cardActions_dIvw",previewAndResults:"previewAndResults_PE2z",previewWrapper:"previewWrapper_QdOh",diagramViewer:"diagramViewer_oT78",resultsContainer:"resultsContainer_T94a",resultsPlaceholder:"resultsPlaceholder_DU_4",validatingContainer:"validatingContainer_VTQy",loadingSpinner:"loadingSpinner_wnCv",spin:"spin_TXs4",validatingText:"validatingText_exVz",violationCard:"violationCard__xrq",errorCard:"errorCard_RLrD",warningCard:"warningCard_uPgp",successCard:"successCard_skyk",infoCard:"infoCard_TyLh",violationHeader:"violationHeader_gjYO",severityBadge:"severityBadge_y2v3",violationRule:"violationRule_wvlt",violationDetails:"violationDetails_rRkT",authRequired:"authRequired_lZ2R",loginButton:"loginButton_Jxj2",authHelpText:"authHelpText_ho2R",uploadLimitDialog:"uploadLimitDialog_nSj_",uploadLimitDialogContent:"uploadLimitDialogContent_e3JM",uploadLimitDialogIcon:"uploadLimitDialogIcon_Zo1P"};var l=r(44586),o=r(96392),d=r(79552),c=r(64060),u=r(41238),h=r(59359),m=r(35476),p=r(74983),g=r(68043),v=r(74395),x=(r(19950),r(66234)),j=r(74848);function C(){const{siteConfig:e}=(0,l.A)(),{users:a,loading:r}=(0,d.A)(),[C,f]=(0,i.useState)([]),[_,b]=(0,i.useState)(!1),[N,w]=(0,i.useState)(0),[A,y]=(0,i.useState)(!1),T=(0,i.useRef)(null),k=null!==a.btp;if(r)return(0,j.jsxs)(s.A,{children:[(0,j.jsxs)("div",{className:n.headerBar,children:[(0,j.jsx)("h1",{children:"Architecture Validator"}),(0,j.jsx)("p",{children:"Loading..."})]}),(0,j.jsx)("main",{className:n.mainContainer,children:(0,j.jsx)("div",{style:{textAlign:"center",padding:"2rem"},children:(0,j.jsx)("p",{children:"Checking authentication..."})})})]});if(!k)return(0,j.jsxs)(s.A,{children:[(0,j.jsx)(x.A,{title:"Architecture Validator",subtitle:"BTP authentication required to access this feature",breadcrumbCurrent:"Architecture Validator"}),(0,j.jsx)("main",{className:n.mainContainer,children:(0,j.jsx)("div",{style:{textAlign:"center",padding:"2rem"},children:(0,j.jsxs)("div",{className:n.authRequired,children:[(0,j.jsx)("h2",{children:"BTP Authentication Required"}),(0,j.jsx)("p",{children:"The Architecture Validator requires BTP authentication to ensure secure access to validation services."}),(0,j.jsx)("p",{children:"You will be redirected to the BTP login page automatically, or you can click the button below to login manually."}),(0,j.jsx)("button",{className:n.loginButton,onClick:()=>{const a=e.customFields.backendUrl;window.location.href=`${a}/user/login?origin_uri=${encodeURIComponent(window.location.href)}&provider=btp`},children:"Login with BTP to Continue"}),(0,j.jsx)("p",{className:n.authHelpText,children:"After logging in with BTP, you'll be redirected back to this page."})]})})})]});const R=(e,a)=>{f(r=>r.map(r=>r.id===e?{...r,...a}:r))},L=e=>{const a=Array.from(e).filter(e=>e.name.toLowerCase().endsWith(".drawio")),r=C.length,i=a.length;if(r>=5)return void y(!0);if(r+i>5)return void y(!0);if(i>5)return void y(!0);const s=a.map(e=>new Promise(a=>{const r=new FileReader;r.onload=r=>{a({id:`${e.name}-${e.lastModified}-${Math.random()}`,file:e,content:r.target?.result,status:"batched",results:null,error:null})},r.readAsText(e)}));Promise.all(s).then(e=>{f(a=>[...a,...e])})},B=e=>{e.target.files&&L(e.target.files),e.target.value=""},D=async a=>{R(a.id,{status:"validating"});try{const r=new FormData;r.append("file",a.file);const i=e.customFields.validatorApiUrl,s=o.q.load(),n=s?.token;if(!n)throw new Error("Authentication token not found. Please log in.");const l=await t.A.post(i,r,{headers:{Authorization:`Bearer ${n}`}}),d=l.data.validationReport.filter(e=>"INFO"!==e.severity);let c="success";d.some(e=>"ERROR"===e.severity)?c="error":d.some(e=>"WARNING"===e.severity)&&(c="warning"),R(a.id,{status:c,results:d})}catch(r){const e=r instanceof Error?r.message:"An unexpected error occurred.";R(a.id,{status:"error",error:e})}};return(0,j.jsxs)(s.A,{children:[(0,j.jsx)(x.A,{title:"Architecture Validator",subtitle:"Upload, preview, and validate your .drawio architecture diagrams based on SAP best-practice guidelines",breadcrumbCurrent:"Architecture Validator"}),(0,j.jsx)("main",{className:n.mainContainer,children:0===C.length?(0,j.jsxs)("div",{className:n.fioriUploader,onDragOver:e=>{e.preventDefault(),e.currentTarget.classList.add(n.dragOver)},onDragLeave:e=>e.currentTarget.classList.remove(n.dragOver),onDrop:e=>{e.preventDefault(),e.currentTarget.classList.remove(n.dragOver),e.dataTransfer.files&&L(e.dataTransfer.files)},onClick:()=>T.current?.click(),children:[(0,j.jsx)("input",{ref:T,type:"file",accept:".drawio",onChange:B,style:{display:"none"},multiple:!0}),(0,j.jsxs)(c.p,{direction:"Column",alignItems:"Center",justifyContent:"Center",style:{gap:"0.5rem"},children:[(0,j.jsx)(u.I,{name:"upload-to-cloud",className:n.uploadIcon}),(0,j.jsx)(h.h,{className:n.uploaderTitle,children:"Upload .drawio files"}),(0,j.jsx)(m.E,{className:n.uploaderSubtitle,children:"Drag and drop here or click to browse"})]})]}):(0,j.jsxs)("div",{className:n.contentArea,children:[(0,j.jsxs)("div",{className:n.actionsHeader,children:[(0,j.jsx)(p.$,{design:"Emphasized",onClick:async()=>{b(!0),w(0);const e=C.filter(e=>"batched"===e.status);let a=0;const r=e.length,i=e.map(async e=>{try{await D(e)}finally{a++,w(a/r*100)}});await Promise.all(i),b(!1)},disabled:_||!C.some(e=>"batched"===e.status),children:_?"Validating...":`Validate All (${C.filter(e=>"batched"===e.status).length})`}),(0,j.jsx)(p.$,{design:"Default",onClick:()=>T.current?.click(),disabled:C.length>=5,children:"Add More Files"}),(0,j.jsx)("input",{ref:T,type:"file",accept:".drawio",onChange:B,style:{display:"none"},multiple:!0}),(0,j.jsx)(p.$,{design:"Transparent",onClick:()=>{f([]),w(0),b(!1)},children:"Remove All"})]}),_&&(0,j.jsx)("div",{className:n.progressBarContainer,children:(0,j.jsx)("div",{className:n.progressBar,style:{width:`${N}%`}})}),(0,j.jsx)("div",{className:n.fileListContainer,children:C.map(e=>(0,j.jsxs)("div",{className:`${n.fileCard} ${n[e.status]}`,children:[(0,j.jsxs)("div",{className:n.fileCardHeader,children:[(0,j.jsxs)("div",{className:n.fileInfo,children:[(0,j.jsx)("span",{className:n.statusName,children:"batched"===e.status?"Pending":e.status.charAt(0).toUpperCase()+e.status.slice(1)}),(0,j.jsx)("h3",{className:n.fileName,children:e.file.name})]}),(0,j.jsxs)("div",{className:n.cardActions,children:["batched"===e.status&&(0,j.jsx)(p.$,{design:"Positive",onClick:()=>D(e),children:"Validate"}),(0,j.jsx)(p.$,{design:"Transparent",icon:"delete",tooltip:"Remove File",onClick:()=>{return a=e.id,void f(e=>e.filter(e=>e.id!==a));var a}})]})]}),(0,j.jsxs)("div",{className:n.previewAndResults,children:[(0,j.jsx)("div",{className:n.previewWrapper,children:(0,j.jsx)("iframe",{src:`https://viewer.diagrams.net/?lightbox=1&edit=_blank&layers=1&nav=1#R${encodeURIComponent(e.content)}`,className:n.diagramViewer,title:e.file.name})}),(0,j.jsxs)("div",{className:n.resultsContainer,children:["validating"===e.status?(0,j.jsxs)("div",{className:n.validatingContainer,children:[(0,j.jsx)("div",{className:n.loadingSpinner}),(0,j.jsx)("div",{className:n.validatingText,children:"Validating..."})]}):e.results||e.error?null:(0,j.jsx)("div",{className:n.resultsPlaceholder,children:"Validation results will appear here."}),e.error&&(0,j.jsxs)("div",{className:`${n.violationCard} ${n.errorCard}`,children:[(0,j.jsx)("strong",{children:"API Error:"})," ",e.error]}),0===e.results?.length&&(0,j.jsxs)("div",{className:`${n.violationCard} ${n.successCard}`,children:[(0,j.jsx)("strong",{children:"Validation Passed:"})," No issues found."]}),e.results?.map((e,a)=>(0,j.jsxs)("div",{className:`${n.violationCard} ${n[e.severity.toLowerCase()+"Card"]}`,children:[(0,j.jsx)("div",{className:n.violationHeader,children:(0,j.jsx)("span",{className:n.severityBadge,children:e.severity})}),(0,j.jsxs)("div",{className:n.violationRule,children:[(0,j.jsx)("strong",{children:"Rule:"})," ",e.rule]}),(0,j.jsxs)("div",{className:n.violationDetails,children:[(0,j.jsx)("strong",{children:"Details:"})," ",e.details]})]},a))]})]})]},e.id))})]})}),(0,j.jsxs)(g.l,{open:A,onClose:()=>y(!1),headerText:"Upload Limit Reached",children:[(0,j.jsx)("div",{className:n.uploadLimitDialog,children:(0,j.jsxs)(c.p,{direction:"Column",alignItems:"Start",className:n.uploadLimitDialogContent,children:[(0,j.jsx)(u.I,{name:"alert",className:n.uploadLimitDialogIcon}),(0,j.jsx)(m.E,{children:"You can upload a maximum of 5 diagrams at once."}),(0,j.jsx)(m.E,{children:"Please remove some files or try again with fewer diagrams."})]})}),(0,j.jsx)(v.y,{design:"Footer",endContent:(0,j.jsx)(p.$,{design:"Emphasized",onClick:()=>y(!1),children:"OK"})})]})]})}},66234:(e,a,r)=>{r.d(a,{A:()=>d});r(96540);var i=r(41238),s=r(35476),t=r(64060),n=r(59359);const l={heroBanner:"heroBanner_wA0H",heroContent:"heroContent_BGb3",breadCrumbs:"breadCrumbs_rAmo",homeLink:"homeLink_V6XO",breadcrumbSeparator:"breadcrumbSeparator_ZlLI",breadcrumbCurrent:"breadcrumbCurrent_fWkQ",heroTitle:"heroTitle_aezW",heroSubtitle:"heroSubtitle_ldDM"};var o=r(74848);function d({title:e,subtitle:a,breadcrumbCurrent:r}){return(0,o.jsx)("div",{className:l.heroBanner,children:(0,o.jsxs)("div",{className:l.heroContent,children:[(0,o.jsxs)("div",{className:l.breadCrumbs,children:[(0,o.jsx)("a",{href:"/",className:l.homeLink,children:(0,o.jsx)(i.I,{name:"home"})}),(0,o.jsx)(s.E,{className:l.breadcrumbSeparator,children:">"}),(0,o.jsx)(s.E,{className:l.breadcrumbCurrent,children:r})]}),(0,o.jsxs)(t.p,{direction:"Column",alignItems:"Start",justifyContent:"Center",children:[(0,o.jsx)(n.h,{className:l.heroTitle,children:e}),(0,o.jsx)(s.E,{className:l.heroSubtitle,children:a})]})]})})}}}]);